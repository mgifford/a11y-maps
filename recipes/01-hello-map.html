<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe 01: Hello Accessible Map</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <style>
        body {
            font-family: system-ui, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            line-height: 1.5;
        }

        .map-container {
            height: 400px;
            border: 2px solid #ccc;
            border-radius: 4px;
        }

        /* Ensure focus visibility */
        .leaflet-marker-icon:focus {
            outline: 3px solid #005fcc;
            outline-offset: 2px;
        }
    </style>
</head>

<body>

    <nav>
        <a href="../index.html">‚Üê Back to Menu</a>
    </nav>

    <main>

        <h1>Recipe 01: The Accessible Map Wrapper</h1>
        <p>This is the "Hello World" of accessible mapping. It demonstrates the minimum semantic structure required.</p>

        <figure aria-labelledby="map-caption">
            <figcaption id="map-caption">
                <strong>Map of Downtown Service Locations.</strong>
                Contains 3 markers: School, Park, and Town Hall.
                Use arrow keys to pan the map when focused.
            </figcaption>

            <div id="map" class="map-container" role="application" aria-label="Interactive map of downtown services"
                tabindex="0">
            </div>
        </figure>

        <section style="margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1rem;">
            <h2>Accessibility Features</h2>
            <ul>
                <li><strong>Semantic Wrapper:</strong> The map is wrapped in a <code>&lt;figure&gt;</code> with a
                    <code>&lt;figcaption&gt;</code>. This provides a simpler summary for screen readers users who may
                    skip
                    the complex map application.
                </li>
                <li><strong>Role Application:</strong> The map container has <code>role="application"</code> to signal
                    to
                    screen readers that they should switch to "interaction mode" (passing keyboard keys through to the
                    app).
                </li>
                <li><strong>Keyboard Panning:</strong> The map container has <code>tabindex="0"</code>, making it
                    focusable.
                    We rely on Leaflet's built-in keyboard handler (arrow keys) which works once the element is focused.
                </li>
            </ul>

            <h2>Try This</h2>
            <ol>
                <li>Press <code>Tab</code> until the blue focus ring appears around the map.</li>
                <li>Use <strong>Arrow Keys</strong> to pan the map view.</li>
                <li>Press <code>+</code> or <code>-</code> to zoom in/out.</li>
            </ol>
        </section>
    </main>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        // Initialize map centered on a fake "Downtown"
        const map = L.map('map').setView([51.505, -0.09], 13);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // Define our semantic locations
        const locations = [
            { name: "Central School", coords: [51.505, -0.09], type: "Education" },
            { name: "City Park", coords: [51.500, -0.095], type: "Recreation" },
            { name: "Town Hall", coords: [51.510, -0.08], type: "Government" }
        ];

        // Add markers with accessible properties
        locations.forEach(loc => {
            const marker = L.marker(loc.coords, {
                // Leaflet a11y: ensure keyboard focusable and labelled
                keyboard: true,
                title: loc.name,
                alt: `${loc.name} (${loc.type})`
            }).addTo(map);

            marker.bindPopup(`<b>${loc.name}</b><br>${loc.type}`);
        });
    </script>
</body>

</html>